\documentclass{article}
\usepackage[letterpaper, margin=2cm]{geometry}
\usepackage[utf8]{inputenc}
\usepackage{amssymb}
\usepackage{amsmath}
\usepackage{bm}

\usepackage{subfig}

\setlength\parindent{0pt}

\usepackage{graphicx}
\graphicspath{{../figures/}}

\usepackage{soul}

\DeclareMathOperator*{\argmin}{arg\,min}
\DeclareMathOperator*{\argmax}{arg\,max}

\title{A dissimilitude-based constructive algorithm for a maximum profit facility location problem on a metric-space}

\author{Francisco J. A. Casas \and Renato F. J. Casas \and Claudio E. Torres}

\begin{document}

\maketitle

% TODO: Conocer hasta qué tamaños son capaces de tratar los métodos "eficientes en la práctica". Esto refuerza la necesidad de intentar resolver el modelo con programación dinámica...
\abstract{En el área del \emph{location analysis} los problemas de \emph{facility location} tratan de elegir la ubicación correcta de instalaciones para alcanzar un conjunto de clientes o puntos de demanda. Aunque la mayoría de estos problemas se caracterizan por su NP-completitud se han desarrollado métodos eficientes en la práctica para los más comunes, sin embargo los modelos determinados por la ganancia económica, donde entra en juego el costo de las instalaciones, transporte y la ganancia al alcanzar un cierto cliente, y la cantidad de instalaciones es endógena al problema, han recibido poca atención pese a estar más cerca del uso práctico de la ciencia, probablemente debido a que la posibilidad de elegir si cubrir o no cada cliente aumenta el costo computacional en la práctica. En este trabajo se introduce un modelo que representa estas características y se presenta un método constructivo basado en reducir en cada paso las soluciones encontradas a una población representativa utilizando una métrica de disimilitud espacial entre estas, pudiendo adaptarse los parámetros según la capacidad computacional disponible. Esta idea aprovecha que se esté trabajando sobre un espacio métrico en que la distancia determina los costos de transporte, lo que hace decaer de manera gradual la ganancia de agregar cada cliente, haciendo que la similitud geográfica de las soluciones está estrechamente relacionada con el potencial económico. Finalmente se discuten los resultados obtenidos para casos de prueba, comparando con un algoritmo voraz y con la solución óptima cuando es factible calcularla.
}
% NOTE: ¿Agregar una comparación con su formulación en programación lineal?

\section{Estado del Arte}

% TODO: Completar con el libro

% De acuerdo con la clasificación mencionada en \cite{revelle2005location}...

En el área de la \emph{facility location} entre los problemas más comunes se tienen los modelos de cobertura, que intentan encontrar la cantidad mínima de instalaciones para alcanzar todos los clientes, los \emph{$p$-median} que minimizan la suma de las distancias a cada cliente y los \emph{center problems} que minimizan la mayor distancia de un cliente a una instalación, en ambos últimos la cantidad de instalaciones es un parámetro fijado a priori, pero en todos se tiene la necesidad de cubrir a todos los clientes \cite{owen1998strategic}, esta restricción \emph{serve all comers} es justificable en el sector público, pero en el sector privado se puede optar por no alcanzar un cliente lejano si el hacerlo aporta negativamente a las utilidades.

\cite{mukundan1991joint} muestra un modelo de maximización de utilidades, considerando costos de transporte y niveles de inversión para cada instalación (que permiten abarcar diferentes distancias), entre las variantes se propone  eliminar la restricción \emph{serve all comers}. \cite{brimberg2000maximum} muestra modelos bi-critero entre las ganancias o costos operativos y la inversión necesaria, entre otras cosas, para la compra y puesta en marcha de las instalaciones, al igual que el anterior realiza pruebas con solvers de programación lineal. Ambos trabajos concluyen que la relajación LP de los modelos sobre los que se hicieron pruebas son \emph{integer-friendly} pero no eliminan la restricción \emph{serve all comers} en estas pruebas, aun así  \cite{brimberg2000maximum} concluye que el aumentar el tamaño del problema deteriora la \emph{integer-friendliness}.

\input{modelo}

\section{Problema ilustrativo}

En la Figura \ref{fig:ilustrative_problem} se muestra un problema pequeño para ilustrar el funcionamiento del algoritmo, originado con $|Z|=7$, $|C|=10$ asignando posiciones aleatorias en $[0,1000] \times [0,1000]$, con parámetros $\gamma = 500$, $\alpha = 500$ y $\beta = 1$. La ejecución mostrada se realizó con \texttt{POOL\_SIZE}$=5$. Para este problema todos los pesos $w_i$ son $1$.

\begin{figure}
    \centering
    \subfloat[Problema ilustrativo.]{{\includegraphics[width=5cm,height=5cm]{tiny_case_raw.png}}}
    \qquad \qquad \qquad
    \subfloat[Mejor solución encontrada con \texttt{POOL\_SIZE}$=5$.]{{\includegraphics[width=5cm,height=5cm]{tiny_case_sol.png}}}
    \label{fig:ilustrative_problem}
\end{figure}

\begin{align*}
Z &= \{z_1,z_2,z_3,z_4,z_5,z_6,z_7\} \\
G &= \{z_1,z_2,z_3,z_4,z_5,z_7\} \\
B_1 &= \{\{z_1\},\{z_2\},\{z_3\},\{z_4\},\{z_5\},\{z_7\}\} \\
P_1 &= \{\{z_1\},\{z_2\},\{z_4\},\{z_5\},\{z_7\}\} \\
B_2 &= \{\{z_1,z_2\},\{z_1,z_3\},\{z_1,z_4\},\{z_1,z_5\},\{z_1,z_7\},\{z_3,z_7\},\{z_4,z_7\}\} \\
P_2 &= \{\{z_1,z_3\},\{z_1,z_4\},\{z_1,z_7\},\{z_3,z_7\},\{z_4,z_7\}\} \\
B_3 &= \{\{z_1,z_3,z_7\},\{z_1,z_4,z_7\}\} \\
P_3 &= \{\{z_1,z_3,z_7\},\{z_1,z_4,z_7\}\} \\
B_4 &= \{\} \\
\text{Mejor} &= \argmax_{S \in \cup_{i} (P_i)}\Phi(S) = \{z_1,z_4,z_7\}
\end{align*}

En primer lugar se calcula $G$, $z_6$ es excluído ya que $\{z_6\}$ no tiene valor positivo en la función objetivo y $G$ es también $B_1$.
En $P_1$ el proceso de reducción elimina $\{z_3\}$, producto de su similitud con $\{z_2\}$, logrando así obtener una \emph{pool} de tamaño $5$.
$B_2$ se construye agregando instalaciones de $G$ a las soluciones de $P_1$, nótese que, por ejemplo, la solución $\{z_2,z_7\}$ pudo haber sido generada en este proceso, tanto expandiendo $\{z_2\}$ con $z_7$ como expandiendo $\{z_7\}$ con $z_2$, pero no se agrega a la \emph{base} pues en la función objetivo no logró superar a alguna de estas soluciones que la pudo haber generado.
El proceso de reducción vuelve a eliminar soluciones parecidas hasta lograr $P_2$, al generar $B_3$ sólo resultan 2 soluciones pués el costo de agregar instalaciones sobrepasa la ganancia en la mayoría de estas. Para formar $P_3$ el proceso de reducció no hace nada pues hay menos de \texttt{POOL\_SIZE} soluciones, finalmente ninguna de las soluciones en $P_3$ puede expandirse de ninguna forma que genere una solución de tamaño 4 más rentable y la ejecución termina, entregando la mejor solución de entre todas las \emph{pools}.

\input{reduccion}

\section{Métricas de disimilitud}
\label{metricas_disimilitud}

Como se señaló previamente, para comparar soluciones se requiere una medida de disimilitud, siendo lógico que esté asociada a la métrica de distancia $d(a,b)$ entre dos ubicaciones $a,b$. Para que una medida $D(A,B)$ entre dos soluciones, $A = \{a_1,a_2,...,a_n\}$ y $B = \{b_1,b_2,...,b_m\}$, sea una métrica debe cumplir con:

\begin{enumerate}
\item $D(A,B) = 0 \Leftrightarrow A=B$
\item $D(A,B) = D(B,A)$
\item $D(A,C) \leq D(A,B) + D(B,C)$
\end{enumerate}

Para los experimentos se utilizará el \emph{mean geometric error} por su facilidad de cálculo. Esta métrica corresponde a la distancia promedio que tienen las ubicaciones de ambos conjuntos a la ubicación más cercana en el conjunto opuesto.

\begin{equation}
D(A,B) = \frac{1}{|A|+|B|}\left(\sum_{a \in A}\inf_{b \in B}d(a,b) +
\sum_{b \in B}\inf_{a \in A}d(b,a)\right)
\end{equation}

También se sugiere el \emph{minimum weight matching}. Esta métrica corresponde a la suma de las distancias entre los pares del matching completo $m^\star$ entre $A$ y $B$ que minimiza esta suma de distancias. $m^\star$ es, por lo tanto, la solución a un problema de asignación.

\begin{equation}
D(A,B) = \inf_{m \in M}\left( \sum_{(a,b) \in m} d(a,b)\right)
\end{equation}
Donde $M$ es el conjunto de todos los posibles matchings completos entre $A$ y $B$.

La razón de la elección de estas métricas es que consideran todos los elementos, haciendo que cualquier diferencia entre combinaciones de posibles ubicaciones sea considerada en el algoritmo. Si se utilizara, por ejemplo, \emph{simple linkage} o \emph{complete linkage} que sólo dependen del par de ubicaciones más cercano o más alejado respectivamente, sería común que dos soluciones, pudiendo ser bastante diferentes, tengan la misma disimilitud a una tercera, produciendo empates que se rompen arbitrariamente en el proceso de reducción.

\section{Experimentos y resultados}

\section{Conclusiones}

\bibliographystyle{amsplain}
\bibliography{main}{}

\end{document}
